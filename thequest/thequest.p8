pico-8 cartridge // http://www.pico-8.com
version 15
__lua__
-- from https://www.lexaloffle.com/bbs/?tid=3117
-- object, starting frame, number of frames, animation speed, flip
function anim(o,sf,nf,sp,fl)
  if(not o.a_ct) o.a_ct=0
  if(not o.a_st) o.a_st=0

  o.a_ct+=1

  if(o.a_ct%(30/sp)==0) then
    o.a_st+=1
    if(o.a_st==nf) o.a_st=0
  end

  o.a_fr=sf+o.a_st
  spr(o.a_fr,o.x,o.y,1,1,fl)
end

p1={
	x=8,
	y=32,
	faceright=true,
	ismoving=false
	}
	
function p1:mvleft()
	self.faceright=false
	self.x-=1
	self.ismoving=true
end

function p1:mvright()
	self.faceright=true
	self.x+=1
	self.ismoving=true
end

function _init()
 scene=0
 scenes={}
	scenes[0]={draw=draw_intro,update=update_intro}
	init_game()
	scenes[1]={draw=draw_game,update=update_game}
end

function _update()
 scenes[scene].update()
end

function _draw()
 cls()
	scenes[scene].draw()
end

function draw_intro()
	local s1 = "gather the weapons of\nour ancestors.\n\nfulfil your destiny.\n\ndestroy the great evil..."
	local s2 = "press x to begin your journey"
 print(s1,16,16,5)
 print(s2,8,70,5)
end

function update_intro()
	if(btn(5)) then
		scene = 1
	end
end

function draw_game()
 if(not p1.ismoving) then 
 	spr(0,p1.x,p1.y)
 else
 	anim(p1,0,2,10,false)
 end
 map(0, 0, 0, 0, 15, 7)
	rect(0,63,127,127,5)
end

function update_game()
 level = 0
 local x = p1.x
 p1.ismoving = false
 if(btn(1) and x < 119) then
		p1:mvright()
 elseif(btn(0) and x > 7) then
 	p1:mvleft()
 end

end

function init_game()
 
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aaaa0000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0afff0060afff6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0afff0600afff6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03333600033336000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03f33f0003f33f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03333000033330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04004000040004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00400400aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000afff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044000afff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044000333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000444003f33f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044000333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044000400400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000100010000010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000101000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010101002000010000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001000020200000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010100000020202001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
